<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stock Market Dashboard</title>
    <!-- Load Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load React libraries -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Load Babel to translate JSX in the browser -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // The React code from your Canvas file is placed directly here.
        const { useState, useEffect } = React;

        // --- Helper Data & Mocks ---
        const gettingStartedContent = [
            {
                title: "What is the Stock Market?",
                content: [
                    { type: 'paragraph', text: "The stock market is where shares of public companies are bought and sold. It helps companies raise capital and allows investors to grow their wealth by trading stocks." },
                    { type: 'heading', text: "How It Works" },
                    { type: 'paragraph', text: "Investors buy shares through exchanges like the NYSE or NASDAQ, often using brokers. Prices fluctuate based on supply, demand, and company performance." },
                    { type: 'heading', text: "Key Participants" },
                    { type: 'list', items: ["Investors: Individuals or institutions trading stocks.", "Companies: Businesses listing shares to raise funds.", "Regulators: Ensure fair trading (e.g., SEC)."] },
                    { type: 'heading', text: "Types of Stocks" },
                    { type: 'list', items: ["Common Stocks: Voting rights + potential dividends.", "Preferred Stocks: Fixed dividends, no voting rights."] },
                    { type: 'heading', text: "Why Invest?" },
                    { type: 'list', items: ["Potential for high returns.", "Ownership in companies.", "Dividends (profit-sharing)."] },
                    { type: 'heading', text: "Risks" },
                    { type: 'list', items: ["Market volatility.", "Possible loss of capital.", "Impact of economic events."] },
                    { type: 'heading', text: "Key Terms" },
                    { type: 'list', items: ["Bull Market: Rising prices.", "Bear Market: Falling prices.", "Portfolio: Your collection of investments.", "Index: Tracks stock groups (e.g., S&P 500)."] },
                    { type: 'heading', text: "Getting Started" },
                    { type: 'list', items: ["Learn the basics.", "Open a brokerage account.", "Start with a diversified portfolio.", "Stay updated on market trends."] },
                    { type: 'note', text: "Investing carries risks. Always research and consult experts if needed!" },
                ]
            },
            {
                title: "What is Options Trading?",
                content: [
                     { type: 'paragraph', text: "Options trading involves buying/selling contracts that give the right (but not the obligation) to buy or sell an asset (like stocks) at a set price before a specific date." },
                    { type: 'heading', text: "How It Works" },
                    { type: 'list', items: ["Call Option: Right to buy an asset at a set price.", "Put Option: Right to sell an asset at a set price.", "Traders pay a 'premium' to own these contracts."] },
                    { type: 'heading', text: "Key Participants" },
                    { type: 'list', items: ["Buyers: Pay premiums for rights.", "Sellers: Collect premiums, take on obligations.", "Market Makers: Facilitate trading."] },
                    { type: 'heading', text: "Types of Options" },
                    { type: 'list', items: ["American Options: Can be exercised anytime before expiration.", "European Options: Can only be exercised at expiration."] },
                    { type: 'heading', text: "Why Trade Options?" },
                    { type: 'list', items: ["Leverage: Control more assets with less capital.", "Hedging: Protect against price movements.", "Speculation: Profit from market predictions."] },
                    { type: 'heading', text: "Risks" },
                    { type: 'list', items: ["Premiums can be lost if the option expires worthless.", "Sellers face unlimited risk if the market moves against them.", "Complexity requires knowledge and strategy."] },
                    { type: 'heading', text: "Key Terms" },
                    { type: 'list', items: ["Strike Price: Price at which the asset can be bought/sold.", "Expiration Date: Last day to exercise the option.", "Premium: Cost of the option contract.", "In-the-Money: Option has intrinsic value.", "Out-of-the-Money: Option has no intrinsic value."] },
                    { type: 'heading', text: "Getting Started" },
                    { type: 'list', items: ["Learn the basics (calls, puts, strategies).", "Open a brokerage account that supports options.", "Start with simple strategies (e.g., buying calls/puts).", "Practice with paper trading before using real money."] },
                    { type: 'note', text: "Options trading is complex and risky. Always research and consider consulting a financial advisor!" },
                ]
            },
             {
                title: "Technical Analysis",
                content: [
                    { type: 'paragraph', text: "Technical Analysis is a method used to evaluate and predict the future price movements of securities by analyzing historical price data, trading volume, and market trends. Unlike fundamental analysis, it relies on charts, patterns, and indicators." },
                    { type: 'heading', text: "Key Concepts" },
                    { type: 'list', items: ["Price Action: The movement of a security's price over time.", "Trends: The general direction of a price (uptrend, downtrend, or sideways).", "Support and Resistance: Price levels where buying or selling pressure is strong.", "Volume: The number of shares traded, indicating the strength of a price move."] },
                    { type: 'heading', text: "Common Tools" },
                    { type: 'list', items: ["Chart Patterns: Head and Shoulders, Double Top/Bottom, Triangles.", "Indicators: Moving Averages (MA), Relative Strength Index (RSI), MACD.", "Candlestick Patterns: Doji, Hammer, Engulfing patterns."] },
                    { type: 'heading', text: "Why Use It?" },
                    { type: 'list', items: ["Ideal for short-term trading.", "Helps identify entry and exit points.", "Provides tools for risk management.", "Versatile across different markets."] },
                    { type: 'heading', text: "Limitations" },
                    { type: 'list', items: ["Can be subjective.", "Past performance doesn't guarantee future results.", "Can produce false signals in volatile markets."] },
                    { type: 'note', text: "Technical analysis is a powerful tool, but it requires practice and a clear strategy." },
                ]
            },
            {
                title: "Fundamental Analysis",
                content: [
                    { type: 'paragraph', text: "Fundamental Analysis is a method of evaluating the intrinsic value of a security by examining economic, financial, and qualitative factors. It looks at the underlying factors that influence a company's performance." },
                    { type: 'heading', text: "Key Concepts" },
                    { type: 'list', items: ["Intrinsic Value: The true worth of a security.", "Financial Statements: Income Statement, Balance Sheet, Cash Flow Statement.", "Economic Indicators: GDP, inflation, and interest rates."] },
                    { type: 'heading', text: "Key Metrics" },
                    { type: 'list', items: ["Earnings Per Share (EPS)", "Price-to-Earnings (P/E) Ratio", "Price-to-Book (P/B) Ratio", "Debt-to-Equity Ratio", "Dividend Yield"] },
                    { type: 'heading', text: "Qualitative Factors" },
                    { type: 'list', items: ["Management Quality", "Industry Position", "Business Model", "Regulatory Environment"] },
                    { type: 'heading', text: "Why Use It?" },
                    { type: 'list', items: ["Ideal for long-term investing.", "Provides insight into whether a stock is over or underpriced.", "Evaluates a company's financial health."] },
                    { type: 'heading', text: "Limitations" },
                    { type: 'list', items: ["Time-consuming research.", "Qualitative factors can be subjective.", "Short-term market sentiment can override fundamentals."] },
                    { type: 'note', text: "Fundamental analysis is essential for long-term investors seeking to build a strong portfolio." },
                ]
            },
            {
                title: "Risk Management in Crypto",
                content: [
                    { type: 'paragraph', text: "Risk Management in cryptocurrency trading is crucial due to the highly volatile nature of the market. Here are key strategies to manage risk effectively:" },
                    { type: 'list', items: [
                        "Diversify and Allocate Wisely: Spread investments across multiple cryptocurrencies and limit exposure to high-risk assets.",
                        "Use Risk Mitigation Tools: Set stop-loss and take-profit orders. Avoid excessive leverage.",
                        "Secure Your Assets: Use hardware wallets for long-term holdings and enable two-factor authentication (2FA).",
                        "Stay Informed and Avoid Emotions: Conduct thorough research and stick to a predefined strategy.",
                        "Plan for the Worst: Define clear exit strategies and be prepared for extreme market scenarios."
                    ]},
                    { type: 'note', text: "Crypto investments are inherently risky, and there are no guarantees of profit." },
                ]
            },
            {
                title: "Essential Stock Market Vocabulary",
                content: [
                    { type: 'paragraph', text: "Here's a list of essential stock market vocabulary to help you understand the world of investing:" },
                    { type: 'heading', text: "1. Basic Terms" },
                    { type: 'list', items: ["Stock: A share of ownership in a company.", "Dividend: A portion of a company's profits paid to shareholders.", "IPO (Initial Public Offering): The first time a company sells its shares to the public.", "Market Capitalization: The total value of a company's outstanding shares."] },
                    { type: 'heading', text: "2. Market Types" },
                    { type: 'list', items: ["Bull Market: A period of rising stock prices.", "Bear Market: A period of declining stock prices.", "Volatility: The degree of variation in a stock's price.", "Liquidity: How easily a stock can be bought or sold."] },
                    { type: 'heading', text: "3. Trading Terms" },
                    { type: 'list', items: ["Bid: The price a buyer is willing to pay.", "Ask: The price a seller is willing to accept.", "Volume: The number of shares traded.", "Order Types: Market Order, Limit Order, Stop-Loss Order."] },
                    { type: 'heading', text: "4. Investment Strategies" },
                    { type: 'list', items: ["Long Position: Buying a stock expecting its price to rise.", "Short Selling: Selling a borrowed stock expecting its price to fall.", "Value Investing: Buying undervalued stocks.", "Growth Investing: Investing in companies with high growth potential."] },
                     { type: 'heading', text: "5. Financial Metrics" },
                    { type: 'list', items: ["EPS (Earnings Per Share)", "P/E Ratio (Price-to-Earnings Ratio)", "ROE (Return on Equity)", "Debt-to-Equity Ratio"] },
                ]
            }
        ];

        // --- SVG Icons ---

        const SearchIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="h-5 w-5 text-gray-400">
                <circle cx="11" cy="11" r="8"></circle>
                <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
            </svg>
        );

        const BookOpenIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="mr-2 h-5 w-5">
                <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
            </svg>
        );

        const TrendingUpIcon = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline>
                <polyline points="17 6 23 6 23 12"></polyline>
            </svg>
        );

        const TrendingDownIcon = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <polyline points="23 18 13.5 8.5 8.5 13.5 1 6"></polyline>
                <polyline points="17 18 23 18 23 12"></polyline>
            </svg>
        );


        // --- Components ---

        const Header = ({ activePage, setActivePage }) => {
            const NavButton = ({ pageName, children }) => {
                const isActive = activePage === pageName;
                return (
                    <button
                        onClick={() => setActivePage(pageName)}
                        className={`px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200 ${
                            isActive
                                ? 'bg-blue-600 text-white shadow-md'
                                : 'text-gray-300 hover:bg-gray-700 hover:text-white'
                        }`}
                    >
                        {children}
                    </button>
                );
            };

            return (
                <header className="bg-gray-800 text-white shadow-lg">
                    <nav className="container mx-auto px-6 py-4 flex justify-between items-center">
                        <div className="flex items-center">
                            <TrendingUpIcon className="h-8 w-8 text-blue-400 mr-2" />
                            <h1 className="text-xl font-bold tracking-wider">MarketMind</h1>
                        </div>
                        <div className="flex items-center space-x-2 bg-gray-900 rounded-lg p-1">
                            <NavButton pageName="search">Search</NavButton>
                            <NavButton pageName="gettingStarted">Getting Started</NavButton>
                        </div>
                    </nav>
                </header>
            );
        };

        const InfoCard = ({ item }) => {
            return (
                <div className="bg-white rounded-xl shadow-md overflow-hidden transform hover:scale-105 transition-transform duration-300">
                    <div className="p-8">
                        <h2 className="text-2xl font-bold text-gray-800 mb-4">{item.title}</h2>
                        <div className="space-y-4">
                        {item.content.map((el, index) => {
                            switch (el.type) {
                                case 'paragraph':
                                    return <p key={index} className="text-gray-600 leading-relaxed">{el.text}</p>;
                                case 'heading':
                                    return <h3 key={index} className="text-xl font-semibold text-gray-700 mt-4">{el.text}</h3>;
                                case 'list':
                                    return (
                                        <ul key={index} className="list-disc list-inside space-y-2 text-gray-600">
                                            {el.items.map((li, i) => <li key={i}>{li}</li>)}
                                        </ul>
                                    );
                                case 'note':
                                    return <p key={index} className="text-sm text-blue-700 bg-blue-100 p-3 rounded-lg mt-4">{el.text}</p>
                                default:
                                    return null;
                            }
                        })}
                        </div>
                    </div>
                </div>
            );
        };


        const GettingStartedPage = () => {
            return (
                <div className="container mx-auto px-4 py-8">
                    <div className="text-center mb-12">
                        <BookOpenIcon />
                        <h1 className="text-4xl font-extrabold text-gray-800">Welcome to Investing!</h1>
                        <p className="text-lg text-gray-500 mt-2">Your complete guide to understanding the market.</p>
                    </div>
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                        {gettingStartedContent.map((item, index) => (
                            <InfoCard key={index} item={item} />
                        ))}
                    </div>
                </div>
            );
        };

        const StockDataCard = ({ data }) => {
            const isPositive = data.change >= 0;
            const changeColor = isPositive ? 'text-green-500' : 'text-red-500';
            
            const DataRow = ({ label, value }) => (
                <div className="flex justify-between py-3 border-b border-gray-200">
                    <span className="text-sm text-gray-500">{label}</span>
                    <span className="text-sm font-medium text-gray-800">{value}</span>
                </div>
            );

            return (
                <div className="mt-8 bg-white p-6 rounded-xl shadow-lg animate-fade-in">
                    <div className="flex justify-between items-start">
                        <div>
                            <h2 className="text-2xl font-bold text-gray-900">{data.companyName} ({data.symbol})</h2>
                            <p className="text-3xl font-bold text-gray-800 mt-2">${data.price.toFixed(2)}</p>
                        </div>
                        <div className={`flex items-center text-lg font-semibold ${changeColor}`}>
                             {isPositive ? <TrendingUpIcon className="h-6 w-6 mr-1" /> : <TrendingDownIcon className="h-6 w-6 mr-1" />}
                            <span>{data.change.toFixed(2)} ({data.changePercent.toFixed(2)}%)</span>
                        </div>
                    </div>
                    <div className="mt-6 space-y-2">
                        <DataRow label="Market Cap" value={data.marketCap} />
                        <DataRow label="P/E Ratio" value={data.peRatio} />
                        <DataRow label="52 Week High" value={`$${data.week52High.toFixed(2)}`} />
                        <DataRow label="52 Week Low" value={`$${data.week52Low.toFixed(2)}`} />
                    </div>
                </div>
            );
        };

        const SearchPage = () => {
            const [ticker, setTicker] = useState('');
            const [stockData, setStockData] = useState(null);
            const [loading, setLoading] = useState(false);
            const [error, setError] = useState('');

            const handleSearch = (e) => {
                e.preventDefault();
                if (!ticker) return;

                setLoading(true);
                setStockData(null);
                setError('');

                // --- Real API Call ---
                // This now fetches data from your running Python API server
                fetch(`http://127.0.0.1:5001/stock/${ticker}`)
                    .then(response => {
                        if (!response.ok) {
                            throw new Error('Ticker not found');
                        }
                        return response.json();
                    })
                    .then(data => {
                        setStockData(data);
                    })
                    .catch(error => {
                        setError(`Ticker not found. Try "AAPL", "GOOGL", or "TSLA".`);
                    })
                    .finally(() => {
                        setLoading(false);
                    });
            };

            return (
                <div className="container mx-auto px-4 py-16 flex flex-col items-center">
                    <div className="w-full max-w-2xl text-center">
                        <h1 className="text-5xl font-extrabold text-gray-800">Stock Ticker Search</h1>
                        <p className="text-lg text-gray-500 mt-3">Enter a stock symbol to get the latest data.</p>
                        <form onSubmit={handleSearch} className="mt-8 flex relative">
                            <div className="absolute left-4 top-1/2 transform -translate-y-1/2">
                                <SearchIcon />
                            </div>
                            <input
                                type="text"
                                value={ticker}
                                onChange={(e) => setTicker(e.target.value)}
                                placeholder="e.g., AAPL"
                                className="w-full pl-12 pr-4 py-4 text-lg border-2 border-gray-200 rounded-l-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-shadow"
                            />
                            <button
                                type="submit"
                                disabled={loading}
                                className="bg-blue-600 text-white font-bold px-8 py-4 rounded-r-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 transition-colors disabled:bg-blue-300"
                            >
                                {loading ? '...' : 'Search'}
                            </button>
                        </form>
                    </div>
                    <div className="w-full max-w-2xl mt-4">
                        {error && <div className="text-red-500 text-center p-4 bg-red-100 rounded-lg">{error}</div>}
                        {stockData && <StockDataCard data={stockData} />}
                    </div>
                </div>
            );
        };

        // --- Main App Component ---
        function App() {
            const [activePage, setActivePage] = useState('search');

            return (
                <div className="min-h-screen bg-gray-50 font-sans">
                    <style>{`
                        @keyframes fade-in {
                            from { opacity: 0; transform: translateY(10px); }
                            to { opacity: 1; transform: translateY(0); }
                        }
                        .animate-fade-in { animation: fade-in 0.5s ease-out forwards; }
                    `}</style>
                    <Header activePage={activePage} setActivePage={setActivePage} />
                    <main>
                        {activePage === 'search' && <SearchPage />}
                        {activePage === 'gettingStarted' && <GettingStartedPage />}
                    </main>
                </div>
            );
        }

        // --- Mount the React application to the DOM ---
        const container = document.getElementById('root');
        const root = ReactDOM.createRoot(container);
        root.render(<App />);
    </script>
</body>
</html>

